version: "3.9"

services:
  app:
    build: .
    container_name: temporal-node-server
    command: node src/server.js
    ports:
      - "3000:3000"
    environment:
      - TEMPORAL_ADDRESS=temporal:7233
    depends_on:
      - worker
    networks:
      - temporal_shared_network

  worker:
    build: .
    container_name: temporal-node-worker
    command: node src/worker.js
    environment:
      - TEMPORAL_ADDRESS=temporal:7233
    networks:
      - temporal_shared_network

networks:
  temporal_shared_network:
    external: true
